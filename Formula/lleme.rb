# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Lleme < Formula
  desc "Run local LLMs with llama.cpp and Hugging Face"
  homepage "https://github.com/nchapman/lleme"
  version "0.8.2"
  license "MIT"

  on_macos do
    if Hardware::CPU.intel?
      url "https://github.com/nchapman/lleme/releases/download/v0.8.2/lleme_0.8.2_darwin_amd64.tar.gz"
      sha256 "b1a0b0ec3344cb51d8524185fe9db30d5ce21a6cf8972fdbe8d0c7a758fc4a08"

      define_method(:install) do
        bin.install "lleme"
      end
    end
    if Hardware::CPU.arm?
      url "https://github.com/nchapman/lleme/releases/download/v0.8.2/lleme_0.8.2_darwin_arm64.tar.gz"
      sha256 "c5ac81c8878a6c7d4125645f5389eb29c0091888e8315325b2f8d683695f1701"

      define_method(:install) do
        bin.install "lleme"
      end
    end
  end

  on_linux do
    if Hardware::CPU.intel? && Hardware::CPU.is_64_bit?
      url "https://github.com/nchapman/lleme/releases/download/v0.8.2/lleme_0.8.2_linux_amd64.tar.gz"
      sha256 "e10f2a64e53bd022e320aa5d5c51cc312f4c838b38bba310d7347905d2391857"
      define_method(:install) do
        bin.install "lleme"
      end
    end
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/nchapman/lleme/releases/download/v0.8.2/lleme_0.8.2_linux_arm64.tar.gz"
      sha256 "1d81770c8cca848efc3220dcfa015367454315a0282374d04afd375f83424535"
      define_method(:install) do
        bin.install "lleme"
      end
    end
  end

  service do
    run [opt_bin/"lleme", "server", "start"]
    keep_alive crashed: true
    log_path var/"log/lleme.log"
    error_log_path var/"log/lleme.log"
  end
end
